<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Url.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="sop.Ajax.html">Ajax</a><ul class='methods'><li data-type='method'><a href="sop.Ajax.html#.abort">abort</a></li><li data-type='method'><a href="sop.Ajax.html#.add">add</a></li><li data-type='method'><a href="sop.Ajax.html#.all">all</a></li><li data-type='method'><a href="sop.Ajax.html#.clear">clear</a></li><li data-type='method'><a href="sop.Ajax.html#.count">count</a></li><li data-type='method'><a href="sop.Ajax.html#.create">create</a></li><li data-type='method'><a href="sop.Ajax.html#.remove">remove</a></li><li data-type='method'><a href="sop.Ajax.html#abort">abort</a></li><li data-type='method'><a href="sop.Ajax.html#isStopped">isStopped</a></li><li data-type='method'><a href="sop.Ajax.html#send">send</a></li></ul></li><li><a href="sop.Application.html">Application</a><ul class='methods'><li data-type='method'><a href="sop.Application.html#dispatch">dispatch</a></li><li data-type='method'><a href="sop.Application.html#getCurrentRoute">getCurrentRoute</a></li><li data-type='method'><a href="sop.Application.html#registerStage">registerStage</a></li><li data-type='method'><a href="sop.Application.html#run">run</a></li></ul></li><li><a href="sop.Message.html">Message</a><ul class='methods'><li data-type='method'><a href="sop.Message.html#.fromHash">fromHash</a></li><li data-type='method'><a href="sop.Message.html#send">send</a></li></ul></li><li><a href="sop.Observable.html">Observable</a><ul class='methods'><li data-type='method'><a href="sop.Observable.html#fire">fire</a></li><li data-type='method'><a href="sop.Observable.html#getListeners">getListeners</a></li><li data-type='method'><a href="sop.Observable.html#hasEvent">hasEvent</a></li><li data-type='method'><a href="sop.Observable.html#off">off</a></li><li data-type='method'><a href="sop.Observable.html#on">on</a></li><li data-type='method'><a href="sop.Observable.html#registerEvents">registerEvents</a></li></ul></li><li><a href="sop.Stage.html">Stage</a><ul class='methods'><li data-type='method'><a href="sop.Stage.html#addAutoAbortTask">addAutoAbortTask</a></li><li data-type='method'><a href="sop.Stage.html#getMessage">getMessage</a></li><li data-type='method'><a href="sop.Stage.html#init">init</a></li><li data-type='method'><a href="sop.Stage.html#render">render</a></li></ul></li><li><a href="sop.Template.html">Template</a><ul class='methods'><li data-type='method'><a href="sop.Template.html#getCTpl">getCTpl</a></li></ul></li><li><a href="sop.Template.CTpl.html">CTpl</a><ul class='methods'><li data-type='method'><a href="sop.Template.CTpl.html#render">render</a></li></ul></li><li><a href="sop.Url.html">Url</a><ul class='methods'><li data-type='method'><a href="sop.Url.html#.parse">parse</a></li><li data-type='method'><a href="sop.Url.html#.parseHash">parseHash</a></li><li data-type='method'><a href="sop.Url.html#.parseSearch">parseSearch</a></li><li data-type='method'><a href="sop.Url.html#toString">toString</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="sop.html">sop</a><ul class='methods'><li data-type='method'><a href="sop.html#.aRemove">aRemove</a></li><li data-type='method'><a href="sop.html#.assertEmpty">assertEmpty</a></li><li data-type='method'><a href="sop.html#.extend">extend</a></li><li data-type='method'><a href="sop.html#.extendProto">extendProto</a></li><li data-type='method'><a href="sop.html#.fDelay">fDelay</a></li><li data-type='method'><a href="sop.html#.generateId">generateId</a></li><li data-type='method'><a href="sop.html#.getValueByPath">getValueByPath</a></li><li data-type='method'><a href="sop.html#.isArray">isArray</a></li><li data-type='method'><a href="sop.html#.isBoolean">isBoolean</a></li><li data-type='method'><a href="sop.html#.isElement">isElement</a></li><li data-type='method'><a href="sop.html#.isFunction">isFunction</a></li><li data-type='method'><a href="sop.html#.isNumber">isNumber</a></li><li data-type='method'><a href="sop.html#.isNumeric">isNumeric</a></li><li data-type='method'><a href="sop.html#.isObject">isObject</a></li><li data-type='method'><a href="sop.html#.isObjectLike">isObjectLike</a></li><li data-type='method'><a href="sop.html#.isString">isString</a></li><li data-type='method'><a href="sop.html#.isUndefined">isUndefined</a></li><li data-type='method'><a href="sop.html#.oEvery">oEvery</a></li><li data-type='method'><a href="sop.html#.oForEach">oForEach</a></li><li data-type='method'><a href="sop.html#.oIndexOf">oIndexOf</a></li><li data-type='method'><a href="sop.html#.oKeys">oKeys</a></li><li data-type='method'><a href="sop.html#.oToQueryString">oToQueryString</a></li><li data-type='method'><a href="sop.html#.setValueByPath">setValueByPath</a></li><li data-type='method'><a href="sop.html#.sFormat">sFormat</a></li><li data-type='method'><a href="sop.html#.sToObject">sToObject</a></li><li data-type='method'><a href="sop.html#.type">type</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#define">define</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Url.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>define({
    name: 'sop.Url',
    init: function () {
        /**
         * @class
         * @memberof sop
         */
        var Url = function () {
            /** @prop {String} protocol Example: 'http:' */
            this.protocol = '';
            /** @prop {String} host Example: 'example.com' */
            this.host = '';
            /** @prop {String} port Example: '8080' */
            this.port = '';
            /** @prop {String} path Example: '/index.html' */
            this.path = '';
            /** @prop {String} search Example: '?k=v' */
            this.search = '';
            /** @prop {String} hash Example: '#anchor' */
            this.hash = '';
        };

        /**
         * Converts url to string
         *
         * @returns {String}
         */
        Url.prototype.toString = function () {
            return this.protocol + '//' + this.host +
                (this.port ? ':' + this.port : '') +
                (this.path ? '/' + this.path : '') +
                (this.search ? '?' + this.search : '') +
                (this.hash ? '#' + this.hash : '');
        };

        /**
         * Parses url string
         *
         * @param {String} str Url string to be parsed
         * @returns {sop.Url}
         */
        Url.parse = function (str) {
            var regOnLine = /^((ftp|http|https):)\/\/([a-zA-Z0-9.-]+)(:(\d+))?(\/[^?#]+)?(\?([^#]*))?(#(.*))?$/,
                regOffLine = /^file:\/\/([^?#]+)?(\?([^#]*))?(#(.*))?/,
                url = new Url();

            if (regOnLine.test(str)) {
                str.replace(regOnLine, function () {
                    url.protocol = arguments[1];
                    url.host = arguments[3];
                    url.port = arguments[5] || '';
                    url.path = arguments[6] || '';
                    url.search = arguments[7] || '';
                    url.hash = arguments[9] || '';

                    url.search = url.search.length > 1 ? url.search : '';
                });
            } else if (regOffLine.test(str)) {
                str.replace(regOffLine, function () {
                    url.protocol = 'file:';
                    url.path = arguments[1] || '';
                    url.hash = arguments[4] || '';
                    url.search = arguments[2] || '';

                    url.search = url.search.length > 1 ? url.search : '';
                });
            }

            return url;
        };

        /**
         * For this `#c/a/?get=test`
         * return below:
         *
         *     {
         *          path: 'c/a/',
         *          search: '?get=test'
         *     }
         *
         * @param str {String} Hash string to be operated
         * @returns {{path: string, search: string}}
         */
        Url.parseHash = function (str) {
            var regHash = /^#([^?]+)(\?.*)?$/,
                ret = {
                    path: '',
                    search: ''
                };

            str.replace(regHash, function () {
                ret['path'] = arguments[1];
                ret['search'] = arguments[2] ? arguments[2] : '';
            });

            return ret;
        };

        /**
         * For example:
         *
         *     var p = sop.url.parseSearch('?k1=v1&amp;k2=v2');
         *     console.log(p);
         *     // p will be:
         *     // {
         *     //     k1 : 'v1',
         *     //     k2 : 'v2'
         *     //  }
         *
         * @param str {String} Search string to be operated
         * @returns {{}}
         */
        Url.parseSearch = function (str) {
            if (str[0] === '?') {
                str = str.slice(1);
            }

            var ret = {}, kv = str.split('&amp;'), i = 0, len = kv.length, p;
            for (; i &lt; len; i++) {
                p = kv[i].split('=');
                if (p.length > 0) {
                    ret[p[0]] = decodeURIComponent(p.length > 1 ? p[1] : '');
                }
            }

            return ret;
        };

        return Url;
    }
});
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0-dev</a> on Tue Apr 14 2015 02:59:57 GMT+0800 (CST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
